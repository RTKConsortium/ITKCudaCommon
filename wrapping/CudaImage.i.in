%extend itkCudaImage@CudaImageTypes@{
    %pythoncode %{
    @property
    def __cuda_array_interface__(self):
        _pixelType = "@PixelType@"
        _typestr = _get_type_string(_pixelType)

        _itksize = self.GetBufferedRegion().GetSize()
        _dim     = len(_itksize)
        _shape   = [int(_itksize[idx]) for idx in range(_dim)]

        if self.GetNumberOfComponentsPerPixel() > 1:
            _shape = [self.GetNumberOfComponentsPerPixel(), ] + _shape

        # Reverse array to force C-order indexing. This is the reverse of how
        # indices are specified in ITK, i.e. k,j,i versus i,j,k. However
        # C-order indexing is expected by most algorithms in NumPy / SciPy.
        _shape.reverse()
        _shape = tuple(_shape)

        return {
            'shape': _shape,
            'data': (int(self.GetCudaDataManager().GetGPUBufferPointer()), False),
            'typestr': _typestr,
            'descr': [('', _typestr)],
            'version': 3,
            'stream': None,
            'strides': None
        }
    %}
};
